-- Xóa intro cũ nếu có
if game:GetService("CoreGui"):FindFirstChild("IntroGui") then
    game:GetService("CoreGui").IntroGui:Destroy()
end

local CoreGui = game:GetService("CoreGui")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")

-- ScreenGui
local introGui = Instance.new("ScreenGui")
introGui.Name = "IntroGui"
introGui.Parent = CoreGui
introGui.IgnoreGuiInset = true
introGui.ResetOnSpawn = false

-- Nền mờ (Blur)
local blurEffect = Instance.new("BlurEffect")
blurEffect.Size = 20
blurEffect.Parent = game:GetService("Lighting")

local background = Instance.new("Frame")
background.Size = UDim2.new(1, 0, 1, 0)
background.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
background.BackgroundTransparency = 0.5
background.BorderSizePixel = 0
background.Parent = introGui

-- Tiêu đề
local textLabel = Instance.new("TextLabel")
textLabel.Size = UDim2.new(1, 0, 0, 120)
textLabel.Position = UDim2.new(0.5, 0, 1.2, 0) -- bắt đầu dưới màn hình
textLabel.AnchorPoint = Vector2.new(0.5, 0.5)
textLabel.BackgroundTransparency = 1
textLabel.Font = Enum.Font.GothamBold
textLabel.TextSize = 90
textLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
textLabel.TextStrokeTransparency = 0
textLabel.TextStrokeColor3 = Color3.fromRGB(255, 255, 255)
textLabel.Text = "KHA HUB SCRIPT"
textLabel.Parent = introGui

-- Gradient chữ
local gradient = Instance.new("UIGradient")
gradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(0, 102, 204)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(0, 191, 255)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(255, 255, 255))
}
gradient.Parent = textLabel

-- Glow chữ
local glow = Instance.new("UIStroke")
glow.Thickness = 2
glow.Color = Color3.fromRGB(255, 255, 255)
glow.Transparency = 0.3
glow.Parent = textLabel

-- Loading label
local loadingLabel = Instance.new("TextLabel")
loadingLabel.Size = UDim2.new(0, 200, 0, 20)
loadingLabel.Position = UDim2.new(0.5, -100, 1, -120)
loadingLabel.BackgroundTransparency = 1
loadingLabel.Font = Enum.Font.GothamSemibold
loadingLabel.TextSize = 20
loadingLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
loadingLabel.Text = ""
loadingLabel.Parent = introGui

-- Nền loading
local loadingBackground = Instance.new("Frame")
loadingBackground.Size = UDim2.new(0, 320, 0, 20)
loadingBackground.Position = UDim2.new(0.5, -160, 1, -80)
loadingBackground.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
loadingBackground.BorderSizePixel = 0
loadingBackground.Parent = introGui
loadingBackground.Visible = false

local bgCorner = Instance.new("UICorner")
bgCorner.CornerRadius = UDim.new(1, 0)
bgCorner.Parent = loadingBackground

-- Thanh loading
local loadingBar = Instance.new("Frame")
loadingBar.Size = UDim2.new(0, 0, 1, 0)
loadingBar.BackgroundColor3 = Color3.fromRGB(0, 255, 255)
loadingBar.BorderSizePixel = 0
loadingBar.Parent = loadingBackground

local barCorner = Instance.new("UICorner")
barCorner.CornerRadius = UDim.new(1, 0)
barCorner.Parent = loadingBar

-- Gradient phát sáng cho loading bar
local barGradient = Instance.new("UIGradient")
barGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(0, 200, 255)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(255, 255, 255)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(0, 200, 255))
}
barGradient.Rotation = 0
barGradient.Parent = loadingBar

-- Animation gradient chạy (phát sáng)
task.spawn(function()
    while introGui.Parent do
        TweenService:Create(barGradient, TweenInfo.new(1.2, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut), {
            Offset = Vector2.new(1,0)
        }):Play()
        task.wait(1.2)
        barGradient.Offset = Vector2.new(-1,0)
    end
end)

-- Hiệu ứng slide text từ dưới lên
TweenService:Create(textLabel, TweenInfo.new(1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
    Position = UDim2.new(0.5, 0, 0.5, 0)
}):Play()

task.wait(1.2)

-- Bắt đầu loading
loadingBackground.Visible = true
loadingLabel.Text = "Loading... 0.0%"

local totalTime = 3.2
local startTime = tick()

local tween = TweenService:Create(loadingBar, TweenInfo.new(totalTime, Enum.EasingStyle.Linear), {
    Size = UDim2.new(1, 0, 1, 0)
})
tween:Play()

-- Update %
RunService.RenderStepped:Connect(function()
    local elapsed = tick() - startTime
    local percent = math.clamp((elapsed / totalTime) * 100, 0, 100)
    loadingLabel.Text = string.format("Loading... %.1f%%", percent)
end)

-- Kết thúc
task.wait(totalTime)
TweenService:Create(background, TweenInfo.new(0.3), {BackgroundTransparency = 1}):Play()
TweenService:Create(textLabel, TweenInfo.new(0.3), {TextTransparency = 1, TextStrokeTransparency = 1}):Play()
TweenService:Create(glow, TweenInfo.new(0.3), {Transparency = 1}):Play()
TweenService:Create(loadingLabel, TweenInfo.new(0.3), {TextTransparency = 1}):Play()
TweenService:Create(loadingBackground, TweenInfo.new(0.3), {BackgroundTransparency = 1}):Play()
TweenService:Create(loadingBar, TweenInfo.new(0.3), {BackgroundTransparency = 1}):Play()

task.wait(0.35)
blurEffect:Destroy()
introGui:Destroy()

-- Chạy script chính
loadstring(game:HttpGet("https://raw.githubusercontent.com/Nguyennguyenquockha/Kha-hub/refs/heads/main/tong%20hop%20demo%20v5.01"))()